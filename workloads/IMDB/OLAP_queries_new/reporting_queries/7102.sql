SELECT MAX("movie_companies"."movie_id") as agg_0 FROM "kind_type" LEFT OUTER JOIN "title" ON "kind_type"."id" = "title"."kind_id" LEFT OUTER JOIN "movie_companies" ON "title"."id" = "movie_companies"."movie_id" LEFT OUTER JOIN "movie_keyword" ON "title"."id" = "movie_keyword"."movie_id" LEFT OUTER JOIN "company_type" ON "movie_companies"."company_type_id" = "company_type"."id"  WHERE "company_type"."kind" IN ('production companies') AND ("movie_companies"."company_type_id" != 1 OR ("movie_companies"."company_type_id" >= 1 AND "movie_companies"."company_type_id" != 2)) AND "title"."title" LIKE '%d%e%' AND "movie_companies"."note" NOT LIKE '%media%)%' AND "kind_type"."kind" LIKE '%mov%ie%' AND "company_type"."id" BETWEEN 2 AND 3 AND "movie_keyword"."movie_id" IS NOT NULL;