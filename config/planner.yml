strategy: query_based_beam

###
### Beam planning constants.
###

beam_size: 100
max_provisioning_multiplier: 3
max_feasible_cpu: 85


###
### Neighborhood blueprint planning constants.
###

max_num_table_moves: 3

# Used by the "sampled_neighborhood" strategy
sample_set_size: 100000


###
### Transition and operational cost constants.
###

# $5.00 per TB of data scanned.
# Technically, there is a minimum charge of 10 MB.
athena_usd_per_mb_scanned: 0.000005

# 1 I/O operation per 8 KB page.
# $0.20 per 1 million I/O operations.
# $0.000025 per MB scanned.
aurora_usd_per_mb_scanned: 0.000025

# Assumption is a fixed time cost for a provisioning change.
# The provisioning change time likely is a function of the instance types being
# changed, number of nodes being added/removed, and amount of data stored.
redshift_provisioning_change_time_s: 60
aurora_provisioning_change_time_s: 60

redshift_extract_rate_mb_per_s: 10.0
redshift_load_rate_mb_per_s: 10.0

aurora_extract_rate_mb_per_s: 10.0
aurora_load_rate_mb_per_s: 10.0

# Extracting / loading in Athena corresponds to a conversion to/from Iceberg.
athena_extract_rate_mb_per_s: 10.0
athena_load_rate_mb_per_s: 10.0

s3_usd_per_mb_per_month: 0.000023


###
### Performance metrics scaling modifiers.
### (Used by neighborhood planning.)
###

dataset_scaling:
  redshift_CPUUtilization_Average: 1.0
  redshift_ReadIOPS_Average: 1.0
  aurora_WRITER_CPUUtilization_Average: 1.0
  aurora_WRITER_ReadIOPS_Average: 1.0
  aurora_WRITER_WriteIOPS_Average: 1.0
  athena_TotalExecutionTime_Sum: 1.0

redshift_resource_scaling:
  redshift_CPUUtilization_Average: 1.0
  redshift_ReadIOPS_Average: 1.0

aurora_resource_scaling:
  aurora_WRITER_CPUUtilization_Average: 1.0
  aurora_WRITER_ReadIOPS_Average: 1.0
  aurora_WRITER_WriteIOPS_Average: 1.0


###
### Query latency scaling modifiers (across provisionings).
###

aurora_alpha: 0.97066455
aurora_gamma: 0.722149076

redshift_alpha: 0.7857837
redshift_gamma: 0.635405229


###
### Load factor scaling modifiers.
###

redshift_load_factor:
  resource_alpha: 0.753694931989888
  cpu_to_load_alpha: 0.7861541
  min_scaling_cpu: 30

# TODO: These are Redshift values.
aurora_load_factor:
  resource_alpha: 0.753694931989888
  cpu_to_load_alpha: 0.8761541
  min_scaling_cpu: 30
